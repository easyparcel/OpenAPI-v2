# <span style="color: black;"> References </span>

## ISO 3166 
<img src="../8.Picture/7.Reference/ISO_logo.png" alt="Logo" style="width:65px; margin:0; padding:0;">

At EasyParcel, we adhere to the ISO 3166 standard for the identification of states, provinces, and zones. For example, the code "MY-07" corresponds to the state of Penang in Malaysia.

ISO 3166 is a standard published by the International Organization for Standardization (ISO) that defines codes for the names of countries, dependent territories, special areas of geographical interest, and their principal subdivisions (e.g., provinces or states). The official name of the standard is Codes for the representation of names of countries and their subdivisions. make this sentences better
</details>

## Conutry Code

| Short Country Name | Full Country Name                     |
|--------------------|----------------------------------------|
| SR                 | SURINAME                               |
| SD                 | SUDAN                                  |
| VC                 | ST. VINCENT                            |
| XM                 | ST. MAARTEN                            |
| LC                 | ST. LUCIA                              |
| KN                 | ST. KITTS                              |
| XE                 | ST. EUSTATIUS                          |
| BL                 | ST. BARTHELEMY                         |
| LK                 | SRI LANKA                              |
| ES                 | SPAIN                                  |
| ZA                 | SOUTH AFRICA                           |
| XS                 | SOMALILAND (NORTH SOMALIA)             |
| SO                 | SOMALIA                                |
| SB                 | SOLOMON ISLANDS                        |
| SI                 | SLOVENIA                               |
| SK                 | SLOVAKIA                               |
| SG                 | SINGAPORE                              |
| SL                 | SIERRA LEONE                           |
| SC                 | SEYCHELLES                             |
| RS                 | SERBIA                                 |
| SN                 | SENEGAL                                |
| SA                 | SAUDI ARABIA                           |
| ST                 | SAO TOME AND PRINCIPE                  |
| SM                 | SAN MARINO                             |
| WS                 | SAMOA                                  |
| MP                 | SAIPAN                                 |
| RW                 | RWANDA                                 |
| RU                 | RUSSIAN FEDERATION                     |
| RO                 | ROMANIA                                |
| RE                 | REUNION                                |
| QA                 | QATAR                                  |
| PR                 | PUERTO RICO                            |
| PT                 | PORTUGAL                               |
| PL                 | POLAND                                 |
| PH                 | PHILIPPINES                            |
| PE                 | PERU                                   |
| PY                 | PARAGUAY                               |
| PG                 | PAPUA NEW GUINEA                       |
| PA                 | PANAMA                                 |
| PW                 | PALAU                                  |
| PK                 | PAKISTAN                               |
| OM                 | OMAN                                   |
| NO                 | NORWAY                                 |
| NU                 | NIUE                                   |
| NG                 | NIGERIA                                |
| NE                 | NIGER                                  |
| NI                 | NICARAGUA                              |
| NZ                 | NEW ZEALAND                            |
| NC                 | NEW CALEDONIA                          |
| XN                 | NEVIS                                  |
| NL                 | NETHERLANDS                            |
| NP                 | NEPAL                                  |
| NR                 | NAURU                                  |
| NA                 | NAMIBIA                                |
| MM                 | MYANMAR                                |
| MA                 | MOROCCO                                |
| MS                 | MONTSERRAT                             |
| ME                 | MONTENEGRO                             |
| MN                 | MONGOLIA                               |
| MC                 | MONACO                                 |
| MD                 | MOLDOVA, REPUBLIC OF                   |
| FM                 | MICRONESIA, FEDERATED STATES OF        |
| MX                 | MEXICO                                 |
| YT                 | MAYOTTE                                |
| MU                 | MAURITIUS                              |
| MR                 | MAURITANIA                             |
| MQ                 | MARTINIQUE                             |
| MH                 | MARSHALL ISLANDS                       |
| MT                 | MALTA                                  |
| ML                 | MALI                                   |
| MV                 | MALDIVES                               |
| MW                 | MALAWI                                 |
| MY                 | MALAYSIA                               |
| MG                 | MADAGASCAR                             |
| MK                 | MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF |
| MO                 | MACAU                                  |
| LU                 | LUXEMBOURG                             |
| LT                 | LITHUANIA                              |
| LI                 | LIECHTENSTEIN                          |
| LY                 | LIBYA                                  |
| LR                 | LIBERIA                                |
| LS                 | LESOTHO                                |
| LB                 | LEBANON                                |
| LV                 | LATVIA                                 |
| LA                 | LAO PEOPLE'S DEMOCRATIC REPUBLIC       |
| KG                 | KYRGYZSTAN                             |
| KW                 | KUWAIT                                 |
| XK                 | KOSOVO                                 |
| KR                 | KOREA, REPUBLIC OF                     |
| KP                 | KOREA, DEMOCRATIC PEOPLE'S REPUBLIC OF |
| KI                 | KIRIBATI                               |
| KE                 | KENYA                                  |
| KZ                 | KAZAKHSTAN                             |
| JO                 | JORDAN                                 |
| JE                 | JERSEY                                 |
| JP                 | JAPAN                                  |
| JM                 | JAMAICA                                |
| IT                 | ITALY                                  |
| IL                 | ISRAEL                                 |
| IE                 | IRELAND                                |
| IQ                 | IRAQ                                   |
| IR                 | IRAN, ISLAMIC REPUBLIC OF              |
| ID                 | INDONESIA                              |
| IN                 | INDIA                                  |
| IS                 | ICELAND                                |
| HU                 | HUNGARY                                |
| HK                 | HONG KONG                              |
| HN                 | HONDURAS                               |
| HT                 | HAITI                                  |
| GY                 | GUYANA                                 |
| GW                 | GUINEA BISSAU                          |
| GN                 | GUINEA REPUBLIC                        |
| GG                 | GUERNSEY                               |
| GT                 | GUATEMALA                              |
| GU                 | GUAM                                   |
| GP                 | GUADELOUPE                             |
| GD                 | GRENADA                                |
| GL                 | GREENLAND                              |
| GR                 | GREECE                                 |
| GI                 | GIBRALTAR                              |
| GH                 | GHANA                                  |
| DE                 | GERMANY                                |
| GE                 | GEORGIA                                |
| GM                 | GAMBIA                                 |
| GA                 | GABON                                  |
| ZW                 | ZIMBABWE                               |
| FR                 | FRANCE                                 |
| FI                 | FINLAND                                |
| ZM                 | ZAMBIA                                 |
| FJ                 | FIJI                                   |
| YE                 | YEMEN                                  |
| FO                 | FAROE ISLANDS                          |
| FK                 | FALKLAND ISLANDS (MALVINAS)            |
| ET                 | ETHIOPIA                               |
| VI                 | VIRGIN ISLANDS, U.S.                   |
| EE                 | ESTONIA                                |
| VG                 | VIRGIN ISLANDS, BRITISH                |
| ER                 | ERITREA                                |
| GQ                 | EQUATORIAL GUINEA                      |
| SV                 | EL SALVADOR                            |
| EG                 | EGYPT                                  |
| VN                 | VIETNAM                                |
| EC                 | ECUADOR                                |
| TP                 | EAST TIMOR                             |
| VE                 | VENEZUELA                              |
| DO                 | DOMINICAN REPUBLIC                     |
| DM                 | DOMINICA                               |
| DJ                 | DJIBOUTI                               |
| VU                 | VANUATU                                |
| DK                 | DENMARK                                |
| CZ                 | CZECH REPUBLIC                         |
| CY                 | CYPRUS                                 |
| CU                 | CUBA                                   |
| UZ                 | UZBEKISTAN                             |
| UY                 | URUGUAY                                |
| HR                 | CROATIA                                |
| CI                 | COTE D'IVOIRE                          |
| CR                 | COSTA RICA                             |
| CK                 | COOK ISLANDS                           |
| CD                 | CONGO, THE DEMOCRATIC REPUBLIC OF THE  |
| UM                 | UNITED STATES MINOR OUTLYING ISLANDS   |
| CG                 | CONGO                                  |
| KM                 | COMOROS                                |
| CN                 | CHINA                                  |
| US                 | UNITED STATES                          |
| GF                 | FRENCH GUIANA                          |
| AN                 | NETHERLANDS ANTILLES                   |
| MZ                 | MOZAMBIQUE                             |
| CW                 | CURACAO                                |
| CO                 | COLOMBIA                               |
| CL                 | CHILE                                  |
| TD                 | CHAD                                   |
| CF                 | CENTRAL AFRICAN REPUBLIC               |
| KY                 | CAYMAN ISLANDS                         |
| GB                 | UNITED KINGDOM                         |
| CV                 | CAPE VERDE                             |
| AE                 | UNITED ARAB EMIRATES                   |
| IC                 | CANARY ISLANDS, THE                    |
| CA                 | CANADA                                 |
| UA                 | UKRAINE                                |
| CM                 | CAMEROON                               |
| KH                 | CAMBODIA                               |
| UG                 | UGANDA                                 |
| BI                 | BURUNDI                                |
| BF                 | BURKINA FASO                           |
| BG                 | BULGARIA                               |
| BN                 | BRUNEI DARUSSALAM                      |
| TV                 | TUVALU                                 |
| BR                 | BRAZIL                                 |
| TC                 | TURKS AND CAICOS ISLANDS               |
</details>

## Add-On Feature: EasyParcel Tracking Notification

Real-time parcel tracking has become essential in todayâ€™s fast-paced logistics environment. To improve user experience and enhance transparency, EasyParcel offers multiple tracking notification methods as add-on features for on-demand and standard delivery services.


### ðŸ“² Tracking SMS

Tracking SMS allows recipients to receive real-time parcel status updates via SMS. Notifications are automatically sent when the parcel is dispatched, in transit, or out for delivery. This is especially helpful for users who are always on the go and prefer quick updates without logging into the platform.


### ðŸ“§ Tracking Email

With Tracking Email, recipients receive status updates directly in their inboxes. This is an ideal solution for users who rely heavily on email and want to maintain a full history of parcel status in one place. Updates are triggered automatically as the parcel progresses through various delivery stages.


### ðŸ’¬ Tracking WhatsApp

WhatsApp Tracking is a modern, interactive way to stay informed about parcel movements. Notifications are delivered straight to the recipientâ€™s WhatsApp chat, making it easy to follow updates in real-time and share parcel progress with others if needed.


These tracking features are available for EasyParcel users across various supported countries. Please refer to your local EasyParcel platform for feature availability and pricing. You may also run the **Get Shipment Quotation** endpoint to retrieve pricing details for available tracking features. These tracking features can be activated through the **Submit Order** endpoint during order creation.

## EasyParcel Coupon Feature

EasyParcelâ€™s coupon feature offers customers a convenient way to enjoy special discounts, seasonal promotions, and loyalty rewards. These promo codes help users save on shipping costs and encourage engagement through exclusive campaign offers.


### ðŸŽ What Are EasyParcel Coupons?

Coupons are promo codes issued by EasyParcel that provide instant rebates or special perks when applied to a shipment. They can be targeted based on delivery types, couriers, regions, or customer eligibility (e.g., new users, festive deals).


### ðŸ” Where to Find Coupons

Customers can browse available coupons directly through the EasyParcel platform. These offers may appear on promotional banners, in user dashboards, or be provided via campaigns. Developers can also retrieve available coupons programmatically using the designated API endpoint.

### ðŸ§¾ How to Use Coupons

To enjoy a discount, users simply need to enter the valid coupon code during order submission. If the coupon meets the required conditions, the discount will be reflected in the final price.


Please note that coupon availability and eligibility may vary by country, courier, and shipping method. Always check the terms associated with each coupon before use.

## Cancel Order

This section introduces the cancellation features available for both standard and ondemand shipments on the EasyParcel platform.

### â— Important Cancellation Conditions

* **7-Day Limit:** Cancellation requests must be submitted within **7 days from the scheduled collection date**.
* **No Cancellation After Pickup:** Once the courier **driver has picked up** the parcel, cancellation is **no longer permitted**.
* **Refunds:** If the cancellation is successful, the shipment cost will be **refunded to the user's credit wallet**.

### ðŸ“¡ Relevant Endpoints

* **Bulk Cancellation Support:**

  * Standard shipments **support bulk cancellation**.
  * Ondemand shipments **must be cancelled individually**.

* **`/shipment/cancel`** â€“ for standard shipment cancellations.

* **`/ondemand/shipment/cancel`** â€“ for ondemand shipment cancellations.


## EasyParcel API Standards

This document outlines the standard formats for requests and responses when working with the EasyParcel API.

### Request Format Standards

### General Guidelines

1. All requests must be sent as HTTP POST requests
2. Content-Type header should be set to `application/json`
3. Authentication is handled via Oauth 2.0 access token in the headers
4. All request payloads should be valid JSON objects
5. DateTime values should use the format: YYYY-MM-DD or YYYY-MM-DD HH:MM:SS

### Common Request Structure

Most EasyParcel API endpoints follow a consistent request format:

1. **Single Resource Requests** - Simple requests with a single parameter set:
   ```json
   {
     "parameter1": "value1",
     "parameter2": "value2"
   }
   ```

2. **Batch Requests** - Requests involving multiple items follow an array pattern:
   ```json
   {
     "resource_name": [
       { /* item 1 details */ },
       { /* item 2 details */ }
     ]
   }
   ```

### Example Request Types

### Shipment Submission

Batch format with `shipment` array containing multiple shipment objects:

```json
{
  "shipment": [
    {
      "service_id": "EP-CS09Q",
      "collection_date": "2025-05-02",
      "weight": 2.5,
      "height": 30,
      "length": 40,
      "width": 20,
      "item": [ /* items array */ ],
      "sender": { /* sender details */ },
      "receiver": { /* receiver details */ },
      "feature": { /* feature settings */ }
    },
    // Additional shipments...
  ]
}
```

#### Quotation Request

Similar batch format with `shipment` array containing multiple quote requests:

```json
{
  "shipment": [
    {
      "sender": {
        "postcode": "10150",
        "subdivison_code": "MY-02",
        "country": "MY"
      },
      "receiver": {
        "postcode": "018916",
        "subdivison_code": "SG-04",
        "country": "SG"
      },
      "parcel_value": 50,
      "weight": 0.5,
      "width": 5,
      "length": 5,
      "height": 5
    },
    // Additional quote requests...
  ]
}
```

#### Shipment Listing Request

Simple parameter format for filtering and pagination:

```json
{
  "limit": 3,
  "before_shipment_number": "ES-2504-B944M",
  "shipment_status_code": "7",
  "date_from": "2025-04-01",
  "date_to": "2025-04-23"
}
```

## Response Format Standards

### General Guidelines

1. All responses are returned as JSON objects
2. Every response includes `status_code`, `message`, and `data` fields
3. Successful operations return status code 200
4. Error details are provided in both the message and data sections
5. Batch operations provide individual success/failure information for each item

### Common Response Structure

```json
{
  "status_code": 200,
  "message": "success",
  "data": [
    /* Response data objects */
  ]
}
```

### Success Response Patterns

#### Single Resource Response

```json
{
  "status_code": 200,
  "message": "success",
  "data": {
    "resource_property1": "value1",
    "resource_property2": "value2"
  }
}
```

#### Batch Operation Response

```json
{
  "status_code": 200,
  "message": "2 requests success, 1 request error.",
  "data": [
    {
      "status": "success",
      "message": "Order Processed",
      "item_id": "12345"
    },
    {
      "status": "success",
      "message": "Order Processed",
      "item_id": "12346"
    },
    {
      "status": "error",
      "message": "Invalid postal code",
      "item_id": "12347"
    }
  ]
}
```

#### Collection Response

```json
{
  "status_code": 200,
  "message": "success",
  "data": [
    { /* Item 1 */ },
    { /* Item 2 */ },
    { /* Item 3 */ }
  ]
}
```

### Error Response Patterns

#### Request Validation Error

```json
{
  "status_code": 400,
  "message": "Validation failed",
  "data": {
    "errors": [
      "The service_id field is required",
      "The collection_date field is required"
    ]
  }
}
```

#### Resource Not Found

```json
{
  "status_code": 404,
  "message": "No Order with shipment_number ES-2504-3WYYP found from this account",
  "data": []
}
```

#### Authentication Error

```json
{
  "status_code": 401,
  "message": "Invalid Oauth 2.0 access token",
  "data": null
}
```

#### Partial Success in Batch Operations

```json
{
  "status_code": 200,
  "message": "1 requests success, 2 request error.",
  "data": [
    {
      "status": "success",
      "message": "Order Cancelled",
      "shipment_number": "ES-2504-WZ9VY"
    },
    {
      "status": "error",
      "message": "Shipment Already Cancelled",
      "shipment_number": "ES-2504-JUB4T"
    },
    {
      "status": "error",
      "message": "Shipment Not Found",
      "shipment_number": "ES-2504-INVALID"
    }
  ]
}
```

## Common Field Types

| Field Type | Format | Example |
|------------|--------|---------|
| Date | YYYY-MM-DD | 2025-05-02 |
| DateTime | YYYY-MM-DD HH:MM:SS | 2025-05-02 14:30:00 |
| Weight | Numeric (kg) | 2.5 |
| Dimensions | Numeric (cm) | 30 |
| Currency | ISO Currency Code | MYR |
| Country Code | ISO Country Code | MY |
| Subdivision Code | ISO 3166-2 code | MY-07 |
| Phone Code | With "+" prefix | +60 |
| Boolean | true/false | true |

## Best Practices

1. **Validate Input**: Always validate request parameters against the API documentation before submission
2. **Check Status Codes**: Always check the status_code in the response
3. **Handle Batch Responses**: For batch operations, check individual status values for each item
4. **Error Handling**: Implement proper error handling based on the error message patterns
5. **Pagination**: For list endpoints, use the provided pagination mechanisms with `limit` and `before_shipment_number`
6. **Date Ranges**: When using date ranges, ensure `date_from` is earlier than `date_to`
7. **Field Lengths**: Respect the maximum field lengths specified in the API documentation

## Notes on API Versioning

The API version is included in the URL path: `/open_api/2025-06/`

Always use the appropriate version for your implementation to ensure compatibility.


## EasyParcel API Error Handling Guide

This document outlines the common error patterns and recommended handling strategies when working with the EasyParcel API.

## Error Response Patterns

The EasyParcel API returns specific error formats depending on the type of error encountered. Understanding these patterns will help you implement proper error handling in your integration.

## Authentication Errors

When authentication fails, you'll receive a response in this format:

```json
{
    "error": {
        "statusCode": 401,
        "status": 401,
        "code": 401,
        "name": "invalid_token"
    },
    "status_code": 401
}
```

### Common Authentication Error Codes

| Error Name       | Description                                         | Recommended Action                                  |
|------------------|-----------------------------------------------------|-----------------------------------------------------|
| invalid_token    | The Oauth 2.0 access token is invalid or expired                   | Verify your Oauth 2.0 access token and request a new one if needed |
| missing_token    | No Oauth 2.0 access token was provided in the request              | Ensure Oauth 2.0 access token is included in the request header    |
| insufficient_scope| The Oauth 2.0 access token doesn't have permission for this action | Request appropriate permissions for your Oauth 2.0 access token    |

## Validation Errors

### Single Resource Validation

For single resource operations with validation errors:

```json
{
    "status_code": 400,
    "message": "Validation error",
    "data": {
        "errors": [
            "The service id field is required",
            "The collection date field is required"
        ]
    }
}
```

### Batch Operation Errors

For batch operations, the API may return a mix of successful and failed operations:

#### Complete Batch Failure

```json
{
    "status_code": 200,
    "message": "0 requests success, 3 request error.",
    "data": [
        {
            "order_details": {
                "account_id": "438671"
            },
            "pricing": {
                "currency_code": "MYR",
                "total_amount": "0.00",
                "total_tax_amount": "0.00"
            },
            "shipments": [
                {
                    "status": "error",
                    /* shipment details */
                    "errors": [
                        "The service id field is required",
                        "The collection date field is required",
                        "The receiver phone number country code field is required",
                        "The receiver phone number field is required",
                        "The receiver address 1 field is required"
                    ]
                },
                /* additional failed shipments */
            ]
        }
    ]
}
```

#### Partial Success in Batch Operations

```json
{
    "status_code": 200,
    "message": "1 request success, 1 request error.",
    "data": [
        {
            "order_details": {
                "order_number": "EI-2504-6WFXC",
                "account_id": 438671
            },
            "pricing": {
                "currency_code": "MYR",
                "total_amount": "27.83",
                "total_tax_amount": "1.63"
            },
            "shipments": [
                {
                    "status": "success",
                    /* successful shipment details */
                },
                {
                    "status": "error",
                    /* failed shipment details */
                    "errors": [
                        "The service id field is required",
                        "The collection date field is required"
                    ]
                }
            ]
        }
    ]
}
```

## Quotation Errors

Quotation endpoints also follow the batch processing pattern, where some items may succeed while others fail:

```json
{
    "status_code": 200,
    "message": "1 request success, 2 request error.",
    "data": [
        {
            "status": "success",
            "input": { /* input details */ },
            "quotations": [ /* quotation results */ ]
        },
        {
            "status": "error",
            "input": { /* input details */ },
            "errors": [
                "The receiver postcode is invalid"
            ]
        },
        {
            "status": "error",
            "input": { /* input details */ },
            "errors": [
                "The receiver country field is required"
            ]
        }
    ]
}
```

## Common Error Messages

Here are some common error messages you may encounter and how to resolve them:

### Request Validation Errors

| Error Message                                  | Possible Cause                              | Resolution                                            |
|------------------------------------------------|---------------------------------------------|-------------------------------------------------------|
| "The service id field is required"             | Missing service_id in request               | Include a valid service_id from courier list          |
| "The collection date field is required"        | Missing or invalid collection_date          | Provide a valid date in YYYY-MM-DD format            |
| "The receiver phone number field is required"  | Missing receiver phone number               | Include the receiver's phone number                   |
| "The receiver address 1 field is required"     | Missing primary address line                | Include the first line of the receiver's address      |
| "The receiver postcode is invalid"             | Invalid or non-existent postal code         | Verify the postal code with the courier service       |
| "The receiver country field is required"       | Missing country code                        | Include a valid country code (e.g., "MY" for Malaysia)|

### Business Logic Errors

| Error Message                                  | Possible Cause                              | Resolution                                            |
|------------------------------------------------|---------------------------------------------|-------------------------------------------------------|
| "Shipment Already Cancelled"                   | Attempting to cancel an already cancelled shipment | Check shipment status before cancellation request    |
| "No Order with shipment_number X found"        | Incorrect shipment number or not owned by account | Verify the shipment number belongs to your account   |
| "Shipment Cannot Be Cancelled"                 | Shipment is in a state that can't be cancelled | Only shipments in certain states can be cancelled    |
| "Weight exceeds service limits"                | Parcel exceeds courier weight restrictions  | Choose a different service or reduce parcel weight    |
| "Service not available for origin/destination" | Route not serviced by selected courier      | Choose a different courier service                    |

## Error Handling Best Practices

### 1. Check Status Code and Message

Always check both the `status_code` and `message` fields to properly identify errors. A 200 status code does not always mean complete success in batch operations.

### 2. Handle Batch Operations Carefully

For batch operations:
- Parse the `message` field to determine success/error counts
- Iterate through each item in the data array
- Check the `status` field of each item
- Process successful items and handle errors for failed items

### 3. Implement Retry Logic

For transient errors (e.g., network issues, temporary service unavailability), implement a retry mechanism with exponential backoff.

### 4. Log Detailed Error Information

Log detailed error information for troubleshooting, including:
- Request parameters
- Complete error response
- Timestamp
- API endpoint

### 5. Handle Validation Errors Proactively

Implement client-side validation based on known API requirements to reduce validation errors.

### 6. Check for Partial Success

Always assume batch operations may partially succeed and handle accordingly:

```javascript
// Example handling of a batch response
function handleBatchResponse(response) {
  console.log(`Processing response: ${response.message}`);
  
  if (response.status_code !== 200) {
    return handleNonSuccessStatusCode(response);
  }
  
  // Extract success/failure counts from message
  const messageParts = response.message.split(',');
  const successCount = parseInt(messageParts[0].match(/\d+/)[0]);
  const errorCount = parseInt(messageParts[1].match(/\d+/)[0]);
  
  console.log(`Shipments: ${successCount} successful, ${errorCount} failed`);
  
  // Process data
  response.data.forEach(order => {
    if (order.shipments) {
      order.shipments.forEach(shipment => {
        if (shipment.status === 'success') {
          processSuccessfulShipment(shipment);
        } else {
          handleFailedShipment(shipment);
        }
      });
    }
  });
}
```

## Authentication Error Recovery

If you encounter authentication errors:

1. Verify your Oauth 2.0 access token is correct
2. Check if your Oauth 2.0 access token has expired
3. Request a new Oauth 2.0 access token if necessary
4. Ensure your system securely stores the Oauth 2.0 access token
5. Implement automatic token refresh if supported

## Common HTTP Status Codes

| Status Code | Description                 | Handling Strategy                                    |
|-------------|-----------------------------|------------------------------------------------------|
| 200         | Success (may include errors)| Check message and individual item status             |
| 400         | Bad Request                 | Fix request parameters based on error details        |
| 401         | Unauthorized                | Refresh or update API credentials                    |
| 403         | Forbidden                   | Request appropriate permissions                      |
| 404         | Not Found                   | Verify resource identifiers                          |
| 429         | Too Many Requests           | Implement rate limiting and backoff strategy         |
| 500         | Server Error                | Retry with exponential backoff                       |

## Troubleshooting Guide

### Oauth 2.0 access token Issues
- Ensure Oauth 2.0 access token is not expired
- Verify Oauth 2.0 access token is correctly included in the authorization header
- Check if your account has the necessary permissions

### Invalid Input
- Validate all required fields are present
- Ensure postal codes are valid for the respective countries
- Verify dimensions and weights are within courier limitations

### Service Availability
- Check if selected service is available for the specific route
- Verify the courier is operational on the requested collection date
- Confirm service availability for international routes

### Shipment Status Issues
- Verify shipment status before attempting to modify or cancel
- Check if the shipment number exists and belongs to your account
- Ensure operations are performed within allowed timeframes (e.g., cancellation window)

## Contact Support

If you encounter persistent errors that cannot be resolved through this guide, contact EasyParcel support with the following information:

1. Complete request and response details
2. Timestamp of the request
3. API endpoint used
4. Description of the expected vs. actual behavior
5. Steps taken to troubleshoot the issue


## Pagination Guide for EasyParcel API

This document outlines the pagination mechanism used in the EasyParcel API for endpoints that return multiple records, such as shipment listings and on-demand service listings.

### Pagination Overview

EasyParcel API uses cursor-based pagination for list endpoints. This method is more efficient than traditional page number-based pagination, especially for large datasets.

### How Pagination Works

1. You specify a limit of records to return in each request
2. The API returns records sorted by the latest first
3. To retrieve the next set of records, you use the last record's identifier as a cursor

### Pagination Parameters

| Parameter               | Type    | Required | Description                                       |
|------------------------|---------|----------|---------------------------------------------------|
| limit                  | integer | No       | Number of records to return (default: 10, max: 250)|
| before_shipment_number | string  | No       | ID of the record to paginate from                 |

Additionally, you can use filtering parameters along with pagination:

| Parameter               | Type    | Required | Description                                       |
|------------------------|---------|----------|---------------------------------------------------|
| shipment_status_code   | string  | No       | Filter by shipment status                         |
| date_from              | date    | No       | Start date for filtering (YYYY-MM-DD)             |
| date_to                | date    | No       | End date for filtering (YYYY-MM-DD)               |

### Pagination Example

### Initial Request

The first request does not include a `before_shipment_number` parameter:

```json
{
  "limit": 3,
  "shipment_status_code": "7",
  "date_from": "2025-04-01",
  "date_to": "2025-04-23"
}
```

### Subsequent Requests

For the next batch of records, include the `before_shipment_number` from the last record in the previous response:

```json
{
  "limit": 3,
  "before_shipment_number": "ES-2504-B944M",
  "shipment_status_code": "7",
  "date_from": "2025-04-01",
  "date_to": "2025-04-23"
}
```

## Implementation Guide

### Client-Side Pagination Logic

Here's a pseudocode example of how to implement pagination in your client application:

```javascript
// Initial request - no cursor
let params = {
  limit: 20,
  shipment_status_code: "7",
  date_from: "2025-04-01",
  date_to: "2025-04-23"
};

async function fetchAllShipments() {
  let allShipments = [];
  let hasMoreRecords = true;
  
  while (hasMoreRecords) {
    const response = await apiRequest('/shipment/list', params);
    
    // Add fetched shipments to our collection
    allShipments = [...allShipments, ...response.data];
    
    // If we received fewer records than requested, we've reached the end
    if (response.data.length < params.limit) {
      hasMoreRecords = false;
    } else {
      // Set cursor for next request using the last record's ID
      const lastShipment = response.data[response.data.length - 1];
      params.before_shipment_number = lastShipment.shipment_number;
    }
  }
  
  return allShipments;
}
```

### Loading Records On Demand

For user interfaces, you may want to implement "load more" functionality:

```javascript
let currentParams = {
  limit: 20,
  shipment_status_code: "7"
};

let shipments = [];

async function loadMoreShipments() {
  const response = await apiRequest('/shipment/list', currentParams);
  
  // Add new shipments to the existing list
  shipments = [...shipments, ...response.data];
  
  // Update button state
  const loadMoreButton = document.getElementById('load-more');
  if (response.data.length < currentParams.limit) {
    loadMoreButton.style.display = 'none'; // Hide when no more records
  } else {
    // Update cursor for next request
    const lastShipment = response.data[response.data.length - 1];
    currentParams.before_shipment_number = lastShipment.shipment_number;
  }
  
  // Update UI with new shipments
  renderShipments(shipments);
}
```

## Pagination for On-demand Listings

The on-demand listing endpoint (`/open_api/2025-06/ondemand/list`) follows the same pagination pattern as shipment listings, but uses `before_booking_number` instead of `before_shipment_number`:

```json
{
  "limit": 3,
  "before_booking_number": "EOD-123",
  "shipment_status_code": "7",
  "date_from": "2025-04-01",
  "date_to": "2025-04-23"
}
```

## Best Practices

1. **Default Limit**: If not specified, the API uses a default limit of 10 records per request
2. **Maximum Limit**: The maximum limit is 250 records per request
3. **Sort Order**: Results are always sorted with the most recent records first
4. **Filter Efficiency**: Use status and date filters to reduce the dataset before pagination
5. **Cursor Storage**: Always store the last cursor for error recovery
6. **Empty Results**: If a request returns empty results, you've reached the end of the dataset

## Common Issues and Solutions

| Issue                                   | Solution                                            |
|-----------------------------------------|-----------------------------------------------------|
| Missing records in pagination sequence  | Ensure you're using the correct cursor value        |
| Too many API calls for large datasets   | Increase the limit parameter (up to 250)            |
| Need to restart pagination from beginning | Remove the before_shipment_number parameter       |
| Results not matching expected criteria  | Review filter parameters for correct formatting     |

## Notes on Resource Usage

- Using appropriate limit values and filters helps reduce API calls
- Retrieving all records in smaller batches is more reliable than requesting large batches
- Consider implementing caching for frequently accessed records


## Switching to Live
If you've completed testing in the DEMO/Sandbox environment and would like to switch to the live environment, please follow the steps below:

1. Run the "Get New Access Token" flow.
2. Once you reach the "Select Account" section, choose and switch to your live account.
3. ![image](https://github.com/user-attachments/assets/06ece658-cf2b-4b5d-beab-6b4204b97136)
4. That's it! You have successfully switched to the live environment.



